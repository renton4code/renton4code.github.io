(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-HistoryOrderDetails-vue","view-history-order-details-breakdown-summary-HistoryNormalOrderBreakdownSummary-vue"],{"27f7":function(t,e,r){},"4a42":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-breakdown-summary"},[t.hasProductDiscounts?[s("div",{staticClass:"summary-title",attrs:{"data-qa":"breakdown-title"}},[t._v(" "+t._s(t.$t("order.summary.breakdown"))+" ")]),s("div",{staticClass:"summary-detail",attrs:{"data-qa":"breakdown-products"}},[s("label",[t._v(t._s(t.$t("order.summary.productsPrice")))]),s("span",[t._v(t._s(t.totalPriceOfProducts))])]),s("div",{staticClass:"summary-detail",attrs:{"data-qa":"breakdown-discounts"}},[s("label",[t._v(t._s(t.$t("order.summary.productDiscounts")))]),s("span",[t._v("-"+t._s(t.productDiscounts))])]),s("span",{staticClass:"summary-detail-subtext"},[t._v(" "+t._s(t.$t("order.summary.assumedByStore"))+" ")])]:t._e(),t.haveProductsBeenRetrieved?s("div",{staticClass:"summary-detail summary-detail-total",attrs:{"data-qa":"order-details-total"}},[s("label",[t._v(t._s(t.$t("order.summary.totalPrice")))]),s("span",[t.isCashPayment?s("img",{attrs:{"data-qa":"order-details-cash-icon",src:r("1e5e"),alt:t.$t("order.messages.customer.payment.CASH")}}):t._e(),t._v(" "+t._s(t.totalPrice)+" ")])]):t._e()],2)},a=[],i=r("d4ec"),o=r("bee2"),d=r("262e"),c=r("2caf"),l=r("9ab4"),n=r("2fe1"),u=r("a026"),m=r("1b40"),p=r("e6dc"),h=function(t){Object(d["a"])(r,t);var e=Object(c["a"])(r);function r(){return Object(i["a"])(this,r),e.apply(this,arguments)}return Object(o["a"])(r,[{key:"totalPriceOfProducts",get:function(){var t;return Object(p["a"])(null===(t=this.products)||void 0===t?void 0:t.totalProductsPrice)}},{key:"productDiscounts",get:function(){var t;return Object(p["a"])(null===(t=this.products)||void 0===t?void 0:t.partnerProductDiscounts)}},{key:"totalPrice",get:function(){var t;return Object(p["a"])(null===(t=this.products)||void 0===t?void 0:t.total)}},{key:"isCashPayment",get:function(){return this.details&&"CASH"===this.details.paymentMethod}},{key:"hasProductDiscounts",get:function(){var t,e;return this.haveProductsBeenRetrieved&&(null===(t=this.products)||void 0===t?void 0:t.partnerProductDiscounts)&&0!==(null===(e=this.products)||void 0===e?void 0:e.partnerProductDiscounts)}},{key:"haveProductsBeenRetrieved",get:function(){return Boolean(this.products)}},{key:"products",get:function(){return this.details.products}}]),r}(u["default"]);Object(l["c"])([Object(m["c"])()],h.prototype,"details",void 0),h=Object(l["c"])([Object(n["b"])({name:"HistoryNormalOrderBreakdownSummary"})],h);var v=h,y=v,f=(r("7e61"),r("2877")),_=Object(f["a"])(y,s,a,!1,null,"4ba529ef",null);e["default"]=_.exports},"58ac":function(t,e,r){"use strict";r("ac78")},"5cab":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.orderDetails?s("div",{attrs:{id:"orderDetails"}},[s("div",{attrs:{id:"orderDetails_wrapper"}},[s("div",{staticClass:"order-details-information"},[s("div",{staticClass:"order-details-information-primary"},[s("section",[t.displayPickupCode?s("span",{staticClass:"order-details-information__pickup-code",attrs:{"data-qa":"order-details-information-pickup-code"}},[t._v(" "+t._s(t.displayPickupCode)+" ")]):t._e(),t.isPickedUpByCustomer?s("glovo-badge",{staticClass:"order-details-information__pickup-badge",attrs:{"data-qa":"order-details-pickup"}},[t._v(" "+t._s(t.$t("order.badge.pickup"))+" ")]):t._e()],1),t.shouldShowCustomerAndStoreInformation?s("div",[t.orderDetails.isFirstOrder?s("div",{staticClass:"first_order_text",attrs:{"data-qa":"customer-first-order"}},[s("img",{staticClass:"first_order_icon",attrs:{alt:"",src:r("ade6")}}),t._v(" "+t._s(t.$t("customer.first.order"))+" ")]):t._e()]):t._e(),s("pair",{attrs:{"data-qa":"order-details-code",left:t.$t("ticket.order.code"),right:t.orderDetails.code}}),t.shouldShowCustomerAndStoreInformation?s("div",{staticClass:"order_header"},[s("div",[t.availableStoreAddresses.length>1?s("div",{staticClass:"order_store-detail",attrs:{"data-qa":"order-store-details"}},[s("pair",{attrs:{left:t.$t("order.store.city"),right:t.orderDetails.cityName}}),s("pair",{attrs:{left:t.$t("order.store.name"),right:t.orderDetails.storeName}}),s("pair",{attrs:{left:t.$t("order.store.address"),right:t.orderDetails.storeAddress}})],1):t._e(),s("div",{attrs:{"data-qa":"order-customer-details"}},[s("pair",{attrs:{"data-qa":"order-details-customer-name",left:t.$t("order.customer.title"),right:t.orderDetails.customer.name}}),t.orderDetails.customer.phoneNumber?s("pair",{attrs:{"data-qa":"order-details-customer-phone",left:t.$t("order.customer.phone"),right:t.$phone(t.orderDetails.customer.phoneNumber)}}):t._e(),t.isMarketplace&&t.orderDetails.deliveryAddress?s("pair",{attrs:{left:t.$t("order.customer.address"),right:t.orderDetails.deliveryAddress.label}}):t._e(),t.orderDetails.customer.email?s("pair",{attrs:{"data-qa":"order-details-customer-email",left:t.$t("common.email"),right:t.orderDetails.customer.email}}):t._e()],1)])]):t._e()],1)]),s("div",{staticClass:"order"},[t.orderDetails.companyName||t.orderDetails.taxId?s("div",{staticClass:"order_messages"},[s("div",{staticClass:"order_description_title"},[t._v(" "+t._s(t.$t("order.company.invoice.title"))+" ")]),t.orderDetails.companyName?s("pair",{attrs:{left:t.$t("order.company.name"),right:t.orderDetails.companyName}}):t._e(),t.orderDetails.taxId?s("pair",{attrs:{left:t.$t("order.taxId"),right:t.orderDetails.taxId}}):t._e(),t.orderDetails.companyAddressLine1?s("pair",{attrs:{left:t.$t("order.company.address"),right:t.orderDetails.companyAddressLine1+", "+t.orderDetails.companyAddressLine2+". "+t.orderDetails.companyPostalCode+" - "+t.orderDetails.companyAddressCity}}):t._e()],1):t._e(),s("history-order-details-description",{attrs:{details:t.orderDetails}}),s("div",[s("div",{staticClass:"separator"}),t.orderDetails.products?s("div",{staticClass:"order_products"},[t.shouldShowOriginalDescription?s("div",[s("span",{staticClass:"order_description_title",attrs:{"data-qa":"original-description"}},[t._v(t._s(t.$t("order.description.title"))+":")]),s("span",[t._v(t._s(t.orderDetails.originalDescription))])]):t._e(),t._l(t.orderDetails.products.servedProducts,(function(e){return s("order-product-item",{key:e.id,attrs:{"read-only":!0,product:e,"disable-checks":!t.user.isSuperGlovo(),warnings:!t.user.isSuperGlovo(),"should-show-groceries-checkbox":!1,"data-qa":"order-details-product"}})}))],2):s("placeholder",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],attrs:{"full-width":!0,name:"product"}}),s("div",{staticClass:"separator"}),t.isMarketplace?s("history-marketplace-order-breakdown-summary",{attrs:{details:t.orderDetails,"data-qa":"history-marketplace-order-breakdown"}}):s("history-normal-order-breakdown-summary",{attrs:{details:t.orderDetails,"data-qa":"history-normal-order-breakdown"}})],1),t.orderDetails.courier?s("div",{staticClass:"separator"}):t._e(),t.orderDetails.courier?s("div",{staticClass:"order_courier"},[s("div",{staticClass:"courier-view",attrs:{"data-qa":"courier-info-details"}},[s("img",{staticClass:"courier-picture",attrs:{src:t.getCourierImageUrl(),alt:"courier profile photo"}}),s("div",[s("pair",{attrs:{left:t.$t("order.courier.name"),right:t.orderDetails.courier.name}}),t.orderDetails.courier.phoneNumber?s("pair",{attrs:{left:t.$t("order.courier.phone"),right:t.orderDetails.courier.phoneNumber}}):t._e(),t.shouldShowReportCourierButton?s("div",{staticClass:"report-courier"},[s("glovo-btn",{staticClass:"report-courier_button",attrs:{text:t.$t("order.courier.reporting.title"),bold:!0,type:"transparent-green","data-qa":"report-courier-button"},nativeOn:{click:function(e){return t.showCourierReportOverlay()}}})],1):t._e()],1)])]):t._e()],1),t.courierReportOverlayVisible?s("report-courier-popup",{attrs:{"order-details":t.orderDetails,"order-id":t.orderDetails.id,"store-address-id":t.orderDetails.storeAddressId,"data-qa":"report-courier"},on:{close:t.hideCourierReportOverlay}}):t._e()],1)]):t._e()},a=[],i=(r("caad"),r("2532"),r("d4ec")),o=r("bee2"),d=r("262e"),c=r("2caf"),l=r("9ab4"),n=r("a026"),u=r("7f14"),m=r("6e2d"),p=r("73f7"),h=r("b35e"),v=r("a21a"),y=r("4a42"),f=r("a412"),_=r("607c"),b=r("314e"),C=r("2fe1"),D=r("4bb5"),g=r("458f"),k=r("40c5"),O=r("ce0d"),w=r("2505"),P=r("7031"),$=r("cd5f"),S=r("f257"),A=r("b1c0"),j=function(t){Object(d["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.courierReportOverlayVisible=!1,t}return Object(o["a"])(r,[{key:"showCourierReportOverlay",value:function(){this.courierReportOverlayVisible=!0}},{key:"hideCourierReportOverlay",value:function(){this.courierReportOverlayVisible=!1}},{key:"getCourierImageUrl",value:function(){return this.orderDetails?"https://res.cloudinary.com/glovoapp/image/upload/c_fill,h_160,w_160/".concat(this.orderDetails.courier?this.orderDetails.courier.picture:""):""}},{key:"user",get:function(){return g["a"].parse(this.storeAdmin||{})}},{key:"isMarketplace",get:function(){return m["a"].isMarketplace(this.orderDetails)}},{key:"shouldShowCustomerAndStoreInformation",get:function(){return!this.user.isMCD()&&this.orderDetails&&this.orderDetails.customer}},{key:"shouldShowOriginalDescription",get:function(){return!!this.orderDetails&&m["a"].hasOriginalDescription(this.orderDetails)}},{key:"shouldShowReportCourierButton",get:function(){return!!this.reportedOrders&&this.orderDetails&&!this.reportedOrders.includes(this.orderDetails.id)}},{key:"isPickedUpByCustomer",get:function(){return this.orderDetails.isPickedUpByCustomer}},{key:"displayPickupCode",get:function(){var t,e;return P["a"].getShortCode({code:this.orderDetails.code,pickupCode:null!==(t=this.orderDetails.pickupCode)&&void 0!==t?t:"",storeTrackingCode:null!==(e=this.orderDetails.storeTrackingCode)&&void 0!==e?e:"",usesKitchenCode:this.isKitchenCodeStoreAddress(this.orderDetails.storeAddressId)})}}]),r}(n["default"]);Object(l["c"])([Object(D["b"])("historyOrderDetails")],j.prototype,"orderDetails",void 0),Object(l["c"])([D["b"]],j.prototype,"reportedOrders",void 0),Object(l["c"])([w["a"].Getter(k["c"])],j.prototype,"availableStoreAddresses",void 0),Object(l["c"])([w["a"].Getter(k["d"])],j.prototype,"storeAdmin",void 0),Object(l["c"])([$["a"].Getter(S["e"])],j.prototype,"isKitchenCodeStoreAddress",void 0),j=Object(l["c"])([Object(C["b"])({name:"HistoryOrderDetails",components:{HistoryOrderDetailsDescription:f["default"],HistoryMarketplaceOrderBreakdownSummary:v["default"],HistoryNormalOrderBreakdownSummary:y["default"],OrderProductItem:u["a"],ReportCourierPopup:_["a"],GlovoBtn:b["a"],Pair:h["a"],Icon:p["a"],Placeholder:O["a"],GlovoBadge:A["a"]}})],j);var B=j,q=B,x=(r("7337"),r("2877")),H=Object(x["a"])(q,s,a,!1,null,"590823be",null);e["default"]=H.exports},7337:function(t,e,r){"use strict";r("e2ab")},"7e61":function(t,e,r){"use strict";r("27f7")},a21a:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-breakdown-summary"},[s("div",{staticClass:"summary-title"},[t._v(" "+t._s(t.$t("order.summary.breakdown"))+" ")]),s("div",{staticClass:"summary-detail highlighted strong"},[s("label",[t._v(t._s(t.$t("order.summary.productPrice")))]),s("strong",[t._v(" "+t._s(t._f("currency")(t.totalProductsPrice))+" ")])]),s("div",{staticClass:"summary-detail"},[s("label",[t._v(t._s(t.$t("order.summary.minBasketSurcharge")))]),s("strong",[t._v(t._s(t._f("currency")(t.minBasketSurcharge)))])]),s("div",{staticClass:"summary-detail"},[s("label",[t._v(t._s(t.$t("order.summary.deliveryFee")))]),s("strong",[t._v(t._s(t._f("currency")(t.deliveryFee)))])]),s("div",{staticClass:"summary-detail summary-detail-discounts"},[s("div",{staticClass:"summary-detail-discounts-amount"},[s("label",[t._v(t._s(t.$t("order.summary.discounts")))]),s("strong",[t.discountsExist?s("span",{staticClass:"summary-detail-discounts-minus"},[t._v("-")]):t._e(),t._v(t._s(t._f("currency")(t.discountsTotal)))])])]),s("div",{staticClass:"separator"}),s("div",{staticClass:"summary-detail strong summary-detail-total",attrs:{"data-qa":"order-details-total"}},[s("label",[t._v(t._s(t.$t("order.summary.totalPrice")))]),s("strong",[t.isCashPayment?s("img",{attrs:{"data-qa":"order-details-cash-icon",src:r("1e5e"),alt:t.$t("order.messages.customer.payment.CASH")}}):t._e(),t._v(" "+t._s(t._f("currency")(t.totalPrice)))])]),t.isCustomerCashAmount?s("span",{staticClass:"summary-detail-customer-text"},[t._v(" ("+t._s(t.$t("order.summary.customer.cash",{amount:t.formattedAmount}))+") ")]):t._e(),t.showEstimatePriceHint?s("span",{staticClass:"order-breakdown-summary-hint"},[t._v(t._s(t.$t("order.summary.hint")))]):t._e()])},a=[],i=r("5530"),o=r("4128"),d=r("2f62"),c=r("6e2d"),l=r("458f"),n=r("40c5"),u={name:"HistoryMarketplaceOrderBreakdownSummary",props:{details:{type:Object,default:function(){return{deliveryFee:0,minBasketSurcharge:0,products:{total:0},discountsTotal:0,customerCashPaymentAmount:null,paymentMethod:""}}}},computed:Object(i["a"])(Object(i["a"])({},Object(d["c"])("authentication",[n["d"]])),{},{user:function(){return l["a"].parse(this[n["d"]]||{})},totalPrice:function(){return this.details&&this.details.products?new o["Decimal"](this.details.deliveryFee||0).plus(this.details.products.total||0).minus(this.details.discountsTotal||0):0},totalProductsPrice:function(){return this.details&&this.details.products&&this.details.products.total||0},minBasketSurcharge:function(){return this.details&&this.details.minBasketSurcharge||0},deliveryFee:function(){return new o["Decimal"](this.details&&this.details.deliveryFee||0).minus(this.minBasketSurcharge)},discountsTotal:function(){return this.details&&this.details.discountsTotal||0},discountsExist:function(){return this.discountsTotal>0},isCustomerCashAmount:function(){return this.details&&this.details.customerCashPaymentAmount||null},isCashPayment:function(){return this.details&&"CASH"===this.details.paymentMethod},shouldSeeOrderBreakdown:function(){return!c["a"].isFinished(this.details)&&(!!c["a"].isAccepted(this.details)&&(!this.user.isMCD()&&this.user.isAllowedToManageOrders()))},showEstimatePriceHint:function(){return!!this.details&&(!this.shouldSeeOrderBreakdown&&!this.user.isMCD())},formattedAmount:function(){return this.formatCurrency(this.details.customerCashPaymentAmount)}}),methods:{formatCurrency:function(t){return this.$options.filters["currency"](t)}}},m=u,p=(r("58ac"),r("2877")),h=Object(p["a"])(m,s,a,!1,null,"5f70698c",null);e["default"]=h.exports},ac78:function(t,e,r){},e2ab:function(t,e,r){}}]);